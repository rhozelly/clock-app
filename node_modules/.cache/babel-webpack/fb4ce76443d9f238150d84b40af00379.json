{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/attendance.service\";\nimport * as i2 from \"../core/services/main.service\";\nimport * as i3 from \"@angular/flex-layout/flex\";\nimport * as i4 from \"@angular/material/list\";\nimport * as i5 from \"@angular/common\";\n\nfunction AttendanceListComponent_mat_list_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-list\", 10);\n    i0.ɵɵelementStart(1, \"mat-list-item\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-list-item\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-list-item\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-list-item\", 11);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const att_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 4, att_r1.date_time == null ? null : att_r1.date_time.toDate(), \"MM/dd/yy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(att_r1.time_in.length === 0 ? \"\" : i0.ɵɵpipeBind2(6, 7, att_r1.time_in == null ? null : att_r1.time_in.toDate(), \"HH:mm a\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(att_r1.time_out.length === 0 ? \"\" : i0.ɵɵpipeBind2(9, 10, att_r1.time_out.toDate(), \"HH:mm a\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.total_atts[i_r2]);\n  }\n}\n\nexport let AttendanceListComponent = /*#__PURE__*/(() => {\n  class AttendanceListComponent {\n    constructor(att, main) {\n      this.att = att;\n      this.main = main;\n      this.yearNow = new Date().getFullYear();\n      this.monthNow = new Date().toLocaleString('en-us', {\n        month: 'short'\n      });\n      this.myID = [];\n      this.atts = [];\n      this.total_atts = [];\n    }\n\n    ngOnInit() {\n      const collection_id = localStorage.getItem('collection-id');\n      this.myID = this.main.decrypt(collection_id, 'collection-id');\n      const sub = this.yearNow + '-' + this.monthNow;\n      this.att.getAttendanceListByUser(this.myID, sub.toUpperCase()).subscribe(res => {\n        res.forEach(val => {\n          const clocked_in = val.payload.doc.data().time_in ? val.payload.doc.data().time_in.toDate() : 0;\n          const clocked_out = val.payload.doc.data().time_out ? val.payload.doc.data().time_out.toDate() : 0;\n          const milisecondsDiff = clocked_out - clocked_in;\n          const a = Math.floor(milisecondsDiff / (1000 * 60 * 60)).toLocaleString(undefined, {\n            minimumIntegerDigits: 2\n          }) + \":\" + (Math.floor(milisecondsDiff / (1000 * 60)) % 60).toLocaleString(undefined, {\n            minimumIntegerDigits: 2\n          }) + \":\" + (Math.floor(milisecondsDiff / 1000) % 60).toLocaleString(undefined, {\n            minimumIntegerDigits: 2\n          });\n          const newstr = a.replace(':', \".\");\n          const news = newstr.slice(0, -3);\n\n          if (news.length > 5) {\n            this.total_atts.push(0 + ' hours');\n          } else {\n            this.total_atts.push(news + ' hours');\n          }\n\n          this.atts.push(val.payload.doc.data());\n        }); // this.atts = res ? res : [];\n        // console.log( this.atts );\n      });\n    }\n\n  }\n\n  AttendanceListComponent.ɵfac = function AttendanceListComponent_Factory(t) {\n    return new (t || AttendanceListComponent)(i0.ɵɵdirectiveInject(i1.AttendanceService), i0.ɵɵdirectiveInject(i2.MainService));\n  };\n\n  AttendanceListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AttendanceListComponent,\n    selectors: [[\"app-attendance-list\"]],\n    decls: 20,\n    vars: 1,\n    consts: [[\"fxLayout\", \"column\", 1, \"attendance-log__wrapper\"], [\"fxLayout\", \"row\", 1, \"attendance-log__header\"], [1, \"page-title\"], [\"fxFlex\", \"\"], [\"fxLayout\", \"column\", 1, \"attendance-log\"], [\"fxLayout\", \"row\", 1, \"attendance-log__list-header\"], [\"fxFlex\", \"20\"], [\"fxFlex\", \"30\"], [\"dense\", \"\", 4, \"ngFor\", \"ngForOf\"], [\"dense\", \"\", \"fxLayout\", \"row\", 1, \"attendance-log__list-footer\"], [\"dense\", \"\"], [\"fxLayoutAlign\", \"start end\", \"fxFlex\", \"30\"]],\n    template: function AttendanceListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"span\", 2);\n        i0.ɵɵtext(3, \"Attendance Log\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"span\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"mat-list\", 5);\n        i0.ɵɵelementStart(7, \"mat-list-item\", 6);\n        i0.ɵɵtext(8, \"Date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-list-item\", 6);\n        i0.ɵɵtext(10, \"Time In\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-list-item\", 6);\n        i0.ɵɵtext(12, \"Time Out\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-list-item\", 7);\n        i0.ɵɵtext(14, \"Total Hours\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, AttendanceListComponent_mat_list_15_Template, 12, 13, \"mat-list\", 8);\n        i0.ɵɵelementStart(16, \"mat-list\", 9);\n        i0.ɵɵelement(17, \"mat-list-item\");\n        i0.ɵɵelement(18, \"mat-list-item\");\n        i0.ɵɵelement(19, \"mat-list-item\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngForOf\", ctx.atts);\n      }\n    },\n    directives: [i3.DefaultLayoutDirective, i3.DefaultFlexDirective, i4.MatList, i4.MatListItem, i5.NgForOf, i3.DefaultLayoutAlignDirective],\n    pipes: [i5.DatePipe],\n    styles: [\".attendance-log__header[_ngcontent-%COMP%]{padding:15px 0}.attendance-log__list-header[_ngcontent-%COMP%]{background:#349b9e82;border-radius:8px 8px 0 0}.attendance-log__wrapper[_ngcontent-%COMP%]{padding:20px}.attendance-log__list-footer[_ngcontent-%COMP%]{background:#b0b0b042;border-radius:0 0 8px 8px}\"]\n  });\n  return AttendanceListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}