{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { Breakpoints } from \"@angular/cdk/layout\";\nimport { map, shareReplay } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./core/services/authentication.service\";\nimport * as i2 from \"./core/services/main.service\";\nimport * as i3 from \"./core/services/profile.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/cdk/layout\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/sidenav\";\nimport * as i8 from \"@angular/material/toolbar\";\nimport * as i9 from \"@angular/flex-layout/flex\";\nimport * as i10 from \"@angular/material/list\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/icon\";\nimport * as i13 from \"@angular/material/menu\";\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction AppComponent_mat_sidenav_container_0_mat_nav_list_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-nav-list\", 22);\n    i0.ɵɵelementStart(1, \"a\", 23, 24);\n    i0.ɵɵelementStart(3, \"div\", 25);\n    i0.ɵɵelement(4, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 27);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const nav_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLinkActive\", ctx_r2.active_class)(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, ctx_r2.role_dec_logged + \"/\" + nav_r4.nav_name));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../assets/app-images/\", nav_r4.nav_icon, \".png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nav_r4.nav_name);\n  }\n}\n\nconst _c1 = function () {\n  return [\"settings\"];\n};\n\nfunction AppComponent_mat_sidenav_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-sidenav-container\", 1);\n    i0.ɵɵelementStart(1, \"mat-sidenav\", 2, 3);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementStart(6, \"mat-toolbar\", 4);\n    i0.ɵɵelement(7, \"img\", 5);\n    i0.ɵɵelement(8, \"img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 7);\n    i0.ɵɵtemplate(10, AppComponent_mat_sidenav_container_0_mat_nav_list_10_Template, 7, 6, \"mat-nav-list\", 8);\n    i0.ɵɵelementStart(11, \"mat-nav-list\", 9);\n    i0.ɵɵelementStart(12, \"a\", 10);\n    i0.ɵɵelement(13, \"img\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-sidenav-content\");\n    i0.ɵɵelementStart(15, \"mat-toolbar\", 12);\n    i0.ɵɵelementStart(16, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_sidenav_container_0_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r7);\n\n      const _r1 = i0.ɵɵreference(2);\n\n      return _r1.toggle();\n    });\n    i0.ɵɵelementStart(17, \"mat-icon\");\n    i0.ɵɵtext(18, \"menu\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"div\", 14);\n    i0.ɵɵelementStart(20, \"div\", 15);\n    i0.ɵɵelementStart(21, \"div\", 16);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 17);\n    i0.ɵɵelement(24, \"img\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"mat-menu\", null, 19);\n    i0.ɵɵelementStart(27, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_sidenav_container_0_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.openProfile();\n    });\n    i0.ɵɵtext(28, \"My Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_sidenav_container_0_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.logOut();\n    });\n    i0.ɵɵtext(30, \"Logout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 21);\n    i0.ɵɵelement(32, \"router-outlet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(26);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"mode\", i0.ɵɵpipeBind1(4, 11, ctx_r0.isHandset$) ? \"over\" : \"side\")(\"opened\", i0.ɵɵpipeBind1(5, 13, ctx_r0.isHandset$) === false);\n    i0.ɵɵattribute(\"role\", i0.ɵɵpipeBind1(3, 9, ctx_r0.isHandset$) ? \"dialog\" : \"navigation\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.navigators);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(15, _c1));\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate2(\"Welcome, \", ctx_r0.profile.first_name, \" \", ctx_r0.profile.last_name, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.profile.profile_img || ctx_r0.defaultProfileImage, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(authService, mainService, profileService, router, breakpointObserver) {\n      this.authService = authService;\n      this.mainService = mainService;\n      this.profileService = profileService;\n      this.router = router;\n      this.breakpointObserver = breakpointObserver;\n      this.defaultProfileImage = 'assets/app-images/profile-default.jpg';\n      this.navigators = [];\n      this.roleExist = true;\n      this.rolePrivs = [];\n      this.active_class = '';\n      this.isHandset$ = this.breakpointObserver.observe(Breakpoints.Handset).pipe(map(result => result.matches), shareReplay());\n      this.profile = [];\n    }\n\n    ngOnInit() {\n      this.getPrivileges();\n      const collection_id = localStorage.getItem('collection-id');\n      this.myID = this.mainService.decrypt(collection_id, 'collection-id');\n      this.user = localStorage.getItem('user') ? new Object(localStorage.getItem('user')).toString() : '';\n      let role = this.user.length > 0 ? JSON.parse(this.user).re : '';\n      let role_dec = this.mainService.decrypt(role ? role : '', 'r0l3_3nc');\n      this.role_dec_logged = role_dec.toLowerCase();\n      this.router.events.subscribe(event => {\n        if (event instanceof NavigationEnd) {\n          this.currentRoute = event.url;\n        }\n      });\n\n      if (this.currentRoute === '/login') {\n        this.router.navigate(['/login']);\n      } else if (this.currentRoute === '/attendance') {\n        this.router.navigate(['/attendance']);\n      } else {\n        if (localStorage.getItem('user')) {\n          this.mainService.getNavigators().subscribe(res => {\n            this.router.navigate([this.role_dec_logged + '/dashboard']);\n\n            if (res !== undefined) {\n              if (res.length > 0) {\n                if (this.rolePrivs[0].toString() === 'all') {\n                  this.navigators = res ? res : [];\n                } else {\n                  this.rolePrivs.forEach(val => {\n                    let nav = res ? res[parseFloat(val) - 1] : [];\n                    this.navigators.push(nav);\n                  });\n                }\n              }\n            }\n          });\n\n          if (this.myID.length > 0) {\n            this.mainService.getLogin(this.myID).subscribe(res => {\n              this.isLoggedIn = res ? res.online : [];\n            });\n            this.profileService.getUserProfile(this.myID).subscribe(res => {\n              this.profile = res ? res : [];\n            });\n          }\n        }\n      }\n\n      let user = localStorage.getItem('user');\n      this.page = !!user;\n    }\n\n    getPrivileges() {\n      this.mainService.getPriv().subscribe(result => {\n        const keys = Object.keys(result);\n        let value;\n        keys.forEach((val, i, data) => {\n          if (val === this.role_dec_logged) {\n            value = data[i];\n          }\n\n          this.roleExist = val === this.role_dec_logged;\n          return;\n        });\n        const priv = result[value];\n        this.rolePrivs = priv ? priv.split(',') : [];\n      });\n    }\n\n    ngDoCheck() {\n      this.collectionId = localStorage.getItem('collection-id');\n      const collection_id = localStorage.getItem('collection-id');\n      this.myID = this.mainService.decrypt(collection_id, 'collection-id');\n      this.user = localStorage.getItem('user') ? new Object(localStorage.getItem('user')).toString() : '';\n      this.isLoggedIn = this.collectionId !== null;\n    }\n\n    logOut() {\n      localStorage.clear();\n      this.authService.logout();\n      this.router.navigate(['login']);\n      window.location.reload();\n    }\n\n    selectedNav(selected) {\n      this.active_class = 'active-list-item';\n      this.router.navigate([this.role_dec_logged + '/' + selected]);\n    }\n\n    openProfile() {\n      this.router.navigate([this.role_dec_logged + '/my-profile']);\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.MainService), i0.ɵɵdirectiveInject(i3.ProfileService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.BreakpointObserver));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[\"class\", \"sidenav-container\", 4, \"ngIf\"], [1, \"sidenav-container\"], [\"fixedInViewport\", \"\", 1, \"sidenav\", 3, \"mode\", \"opened\"], [\"drawer\", \"\"], [1, \"logo-wrapper\"], [\"src\", \"../assets/app-images/iofortech-300-logo.png\", \"alt\", \"iofortech\", 1, \"logo-1\"], [\"src\", \"../assets/app-images/io.png\", \"alt\", \"iofortech\", 1, \"logo-2\"], [\"fxLayout\", \"column\", 1, \"sidenav-texts__wrapper\"], [\"class\", \"sidenav-texts\", 4, \"ngFor\", \"ngForOf\"], [1, \"sidenav__settings\"], [3, \"routerLink\"], [\"src\", \"../assets/app-images/settings_icon.png\", 1, \"sidenav-settings\"], [\"color\", \"primary\", 1, \"top-header\"], [\"mat-icon-button\", \"\", 1, \"burger-menu\", 3, \"click\"], [\"fxFlex\", \"\"], [\"fxLayout\", \"row\", 1, \"top-right__header-wrapper\"], [1, \"welcome\"], [1, \"avatar__wrapper\", 3, \"matMenuTriggerFor\"], [\"alt\", \"profile\", 1, \"avatar__image\", 3, \"src\"], [\"menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\"], [1, \"main-content__wrapper\"], [1, \"sidenav-texts\"], [\"mat-list-item\", \"\", \"routerLinkActive\", \"\", 3, \"routerLinkActive\", \"routerLink\"], [\"rla\", \"routerLinkActive\"], [1, \"icon-sidenav__wrapper\"], [\"alt\", \"icons\", 3, \"src\"], [1, \"sidenav-label\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AppComponent_mat_sidenav_container_0_Template, 33, 16, \"mat-sidenav-container\", 0);\n        i0.ɵɵelement(1, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      }\n    },\n    directives: [i6.NgIf, i4.RouterOutlet, i7.MatSidenavContainer, i7.MatSidenav, i8.MatToolbar, i9.DefaultLayoutDirective, i6.NgForOf, i10.MatNavList, i4.RouterLinkWithHref, i7.MatSidenavContent, i11.MatButton, i12.MatIcon, i9.DefaultFlexDirective, i13.MatMenuTrigger, i13.MatMenu, i13.MatMenuItem, i10.MatListItem, i4.RouterLinkActive],\n    pipes: [i6.AsyncPipe],\n    styles: [\".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:12%;background:#151515}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.logo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.logo-wrapper[_ngcontent-%COMP%]{padding:32px;margin:1% auto 0}.sidenav-texts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#349b9e;font-weight:500;transition:.5s;font-size:18px;text-transform:uppercase;margin-top:10px}.avatar__wrapper[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;overflow:hidden;margin:8px;cursor:pointer}.sidenav-texts__wrapper[_ngcontent-%COMP%]{overflow:hidden}.active-list-item[_ngcontent-%COMP%]{color:#000;border-left:9px solid #349b9e;font-weight:500}.top-right__header-wrapper[_ngcontent-%COMP%]{padding:20px}.welcome[_ngcontent-%COMP%]{font-size:20px;margin:5px;padding:0 22px;text-transform:capitalize;color:#4c4c4c}.top-header[_ngcontent-%COMP%]{box-shadow:0 1px 1px #80808026}.icon-sidenav__wrapper[_ngcontent-%COMP%]{width:30px;margin-right:8px;margin-top:1px}.sidenav-settings[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:20px;width:46px}.burger-menu[_ngcontent-%COMP%], .logo-2[_ngcontent-%COMP%]{display:none}.sidenav-label[_ngcontent-%COMP%]{text-transform:capitalize}@media screen and (max-width: 1200px){.sidenav-label[_ngcontent-%COMP%]{display:none}.sidenav[_ngcontent-%COMP%]{width:auto}.logo-2[_ngcontent-%COMP%]{display:block;width:60px!important;margin:0 auto}.logo-1[_ngcontent-%COMP%]{display:none}.burger-menu[_ngcontent-%COMP%]{display:block}.icon-sidenav__wrapper[_ngcontent-%COMP%]{margin-left:9px}}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}